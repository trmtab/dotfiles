let data_dir = '~/.vim'
if empty(glob(data_dir . '/autoload/plug.vim'))
  silent execute '!curl -fLo '.data_dir.'/autoload/plug.vim --create-dirs  https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'
  autocmd VimEnter * PlugInstall --sync | source $MYVIMRC
endif

call plug#begin()

Plug 'junegunn/vim-easy-align'
Plug 'ycm-core/YouCompleteMe'
Plug 'cespare/vim-toml', { 'branch': 'main' }

call plug#end()

set encoding=utf-8
set ffs=unix,dos,mac
set nobackup
set nowb
set noswapfile
set expandtab
set smarttab
set nocompatible
set lazyredraw
set showcmd
set ruler
set number

" Set to auto read when a file is changed from the outside
set autoread

let mapleader = ","

" Quick save
nmap <leader>w :w!<cr>
" sudo save
command! W execute 'w !sudo tee % > /dev/null' <bar> edit!

" Set 7 lines to the cursor - when moving vertically using j/k
set so=7

set wildignore=*.o,*~,*.pyc

" Configure backspace so it acts as it should act
set backspace=eol,start,indent
set whichwrap+=<,>,h,l
:fixdel

" For regular expressions turn magic on
set magic

" Visual mode pressing * or # searches for the current selection
vnoremap <silent> * :<C-u>call VisualSelection('', '')<CR>/<C-R>=@/<CR><CR>
vnoremap <silent> # :<C-u>call VisualSelection('', '')<CR>?<C-R>=@/<CR><CR>

" Start interactive EasyAlign in visual mode (e.g. vipga)
xmap ga <Plug>(EasyAlign)

" Start interactive EasyAlign for a motion/text object (e.g. gaip)
nmap ga <Plug>(EasyAlign)

" Move between windows
map <C-j> <C-W>j
map <C-k> <C-W>k
map <C-h> <C-W>h
map <C-l> <C-W>l

" Git commits
au FileType gitcommit setlocal spell spelllang=en

" Go
au FileType go setlocal noexpandtab nolist shiftwidth=4 softtabstop=4 tabstop=4

" HTML
au FileType html setlocal expandtab noautoindent indentexpr= shiftwidth=2 softtabstop=2 tabstop=2

" Javascript
au FileType javascript setlocal expandtab keywordprg=cq\ -s shiftwidth=2 softtabstop=2 tabstop=8

" Make
au FileType make setlocal softtabstop=8 shiftwidth=8 tabstop=8

" Perl
au FileType perl setlocal expandtab shiftwidth=4 softtabstop=4 tabstop=8

" Python
au FileType python setlocal expandtab softtabstop=0 shiftwidth=4 tabstop=8 smarttab
au FileType toml setlocal expandtab softtabstop=2 shiftwidth=2 tabstop=2 smarttab

" SQL
au FileType sql setlocal expandtab shiftwidth=8 softtabstop=8 tabstop=8

" vim: set filetype=vim:
